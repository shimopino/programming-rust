# モジュールシステム

- `pub` モジュールの外からアクセスできる
- `pub(crate)` クレートの内部からはアクセスできるが、外部のクレートからは利用できず、ドキュメントにも出てこない
- `なし` プレイベートとなり、定義されたモジュールかその子モジュールからしかアクセスできない
- `pub(super)` 親モジュールからのみアクセス可能
- `pub(in<path>)` 特定の親モジュールとその子孫からのみアクセス可能

複数ファイルへの分割したい場合には、下記の 3 通りの方法を使用する。

- `mod sample` sample モジュールが `sample.rs` という名前のファイルに入っているとコンパイルに伝えている
  - このファイル内で `pub` などの個別のアイテムを定義するだけでいい
- `mod.rs`
  - `mod sample` と宣言すると `sample.rs` と `sample/mod.rs` という両方のファイルをチェックする
  - `sample/mod.rs` ファイル内で `pub mod roots` などと宣言すれば、`sample/roots.rs` というモジュールを外部に公開することができる
- ファイルから直接公開する
  - `mod sample` としたときに `pub mod stems` が定義されているとする
  - ここで `stems.rs` に `pub mod xylem` などを記述する
  - その結果 `stems/xylem.rs` ファイルをそのまま参照できる

モジュールは下記のようにインポートできる。

```rs
use std::mem;

if s1 > s2 {
    mem::swap(&mut s1, &mut s2);
}
```

一般的には関数そのものではなく、タイプやトレイト、モジュールをインポートして、関数や定数などに相対パスでアクセスすることがお勧めされている。

```rs
// 外部のクレートを指す
use ::image::Pixels;

// 自身のモジュールを指す
use self::image::Sampler;
```
